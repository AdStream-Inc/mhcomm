!function(e){function t(t){var a=e(".template-sections"),n=e("#"+t);a.removeClass("active").find(".template-section-content").attr("disabled","disabled"),n.addClass("active").find(".template-section-content").removeAttr("disabled")}function a(t){var a={name:'input[name="name"]',parent_id:'select[name="parent_id"]',enabled:'select[name="enabled"]',auth_only:'select[name="auth_only"]',template:'select[name="template"]'};e.each(a,function(a,n){e(n).val(t[a])})}function n(){var t={'input[name="name"]':"",'select[name="parent_id"]':0,'select[name="enabled"]':1,'select[name="auth_only"]':0,'select[name="template"]':"1-col"};e.each(t,function(t,a){e(t).val(a)})}function o(t,a){e('select[name="template"]').trigger("change"),e.each(a,function(){e('textarea[name="templates['+this.slug+']"]',e("#"+t)).val(this.content)})}function i(){e(".template-sections textarea").val("")}function c(t){e("#form-save").hide(),e("#form-update, .page-create").show();var a='<input type="hidden" id="form-method" name="_method" value="PUT" />';e("#pages-form").attr("action",URL.current+"/"+t),e("#form-method").length||e("#pages-form").append(a)}function l(){e("#form-save").show(),e("#form-update, .page-create").hide(),e("#form-method").remove(),e('select[name="parent_id"] option').removeAttr("disabled"),e("#pages-form").attr("action",URL.current)}t(e("#template").val()),e("#template").on("change",function(){t(e(this).val())}),e(document).on("click",".jstree-anchor",function(){var t=URL.current+"/"+e(this).attr("data-id");e('select[name="parent_id"] option').removeAttr("disabled"),e('select[name="parent_id"] option[value="'+e(this).attr("data-id")+'"]').attr("disabled","disabled"),e.get(t,function(e){a(e.page),o(e.page.template,e.sections),c(e.page.id)})}),e(".page-create").on("click",function(){e(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked"),l(),n(),i()})}(jQuery),function(e){e(".system-nav a").tooltip({placement:"bottom"})}(jQuery);